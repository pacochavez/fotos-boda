doctype html
html
	head
		title Facebook Login JavaScript Example
		meta(charset='UTF-8')
	body
		script
			|function statusChangeCallback(response) {
			|	console.log('statusChangeCallback');
			|	console.log(response);
			|	console.log(response.authResponse.userID);
			|// The response object is returned with a status field that lets the
			|// app know the current login status of the person.
			|// Full docs on the response object can be found in the documentation
			|// for FB.getLoginStatus().
			|	if (response.status === 'connected') {
			|// Logged into your app and 	Facebook.
			|		testAPI();
			|	} else if (response.status === 'not_authorized') {
			|		document.getElementById('status').innerHTML = 'Please log ' + 'into this app.';
			|	} else {
			|		document.getElementById('status').innerHTML = 'Please log ' +'into Facebook.';
			|	}
			|}
			|function checkLoginState() {
			|	FB.getLoginStatus(function(response) {
			|		statusChangeCallback(response);
			|	});
			|}
			|window.fbAsyncInit = function() {
			|	FB.init({
			|		appId      : '{1504301486491959}',
			|		cookie     : true,  // enable cookies to allow the server to access
			|		xfbml      : true,  // parse social plugins on this page
			|		version    : 'v2.1' // use version 2.1
			|	});
			|	FB.getLoginStatus(function(response) {
			|		statusChangeCallback(response);
			|	});
			|};
			|(function(d, s, id) {
			|		var js, fjs = d.getElementsByTagName(s)[0];
			|		if (d.getElementById(id)) return;
			|			js = d.createElement(s); js.id = id;
			|			js.src = "//connect.facebook.net/en_US/all.js#xfbml=1&appId=1504301486491959";
			|			fjs.parentNode.insertBefore(js, fjs);
			|}(document, 'script', 'facebook-jssdk'));
			|function testAPI() {
			|		console.log('Welcome!  Fetching your information.... ');
			|		FB.api('/me', function(response) {
			|			console.log(response);
			|			document.getElementById('status').innerHTML = 'Thanks for logging in, ' + response.name + response.locale+ '!';
			| 	});
			| }
		fb:login-button(scope='public_profile,email,user_photos', onlogin='checkLoginState();')
		div(id="status")